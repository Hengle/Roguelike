syntax = "proto3";

package MoleMole.Net;

message Mob{
    int32 TableId = 1;
    int32 InstancedId = 2;
    int32 Exp = 3;
    int32 Level = 4;
    repeated int32 Skills = 5;
    int32 Character = 6;
    int32 Rank = 7;
    string NickName = 8;
}

message TeamConfig{
    repeated int32 InstancedIds = 1;
}

message Item{
    int32 TableId = 1;
    int32 Count = 2;
}

message PlayerSerializedField{
    repeated Mob Mobs = 1;
    repeated TeamConfig Teams = 2;
    repeated Item Items = 3;
    uint64 LastStaminaRecoverTime = 4;
	map<int32,RpgRecord> RpgRecords = 5;
}

message Player{
    uint32 HkmmId = 1;
    string NickName = 2;
    uint32 HardCoin = 3;
    PlayerSerializedField UnSerializedData = 4;
}

message BattleOnesConfig{
    repeated TeamConfig Teams = 1;
}

message BattleWave{
    repeated Mob Mobs = 1;
}

message BattlePlayerTeam{
    uint32 HkmmId = 1;
    string NickName = 2;
    repeated BattleWave Waves = 3;
}

message BattleFullInfo{
    repeated BattlePlayerTeam Teams = 1;
}

message BattleCmd{
    uint32 CmdType = 1;
    /*
        invalid = 0
        cast skill = 1
        change mob = 2
        skip = 3
        change location = 4
        continue charging = 5
        choose front = 6
    */
    uint32 Round = 2;
    uint32 TeamId = 3;
    repeated int32 Params = 4;
}

message RpgRecord{
    map<int32,int32> StoryLineItems = 1;
	float PosX = 2;
	float PosY = 3;
	int32 LevelID = 4;
	TeamConfig Team = 6;
    uint64 LastModifyTime = 7;
    uint32 WorldTranscendingTimes = 8;
    uint32 State = 9;
    /* 
        not start = 0
        playing = 1
    */
}